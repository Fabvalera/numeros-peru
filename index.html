<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Números Reportados Perú</title>
</head>
<body>

<h1>Números Reportados Perú</h1>

<input id="numero" placeholder="Ej: 987654321">
<button id="btn">Reportar</button>

<p id="resultado"></p>

<!-- 1️⃣ CARGAR FIREBASE PRIMERO -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<!-- 2️⃣ LUEGO TU CÓDIGO -->
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyD2C9o9wEGXczI6aNeJQdgIG_t5qDCeBGQ",
    authDomain: "numeros-peru-15305.firebaseapp.com",
    projectId: "numeros-peru-15305",
    storageBucket: "numeros-peru-15305.firebasestorage.app",
    messagingSenderId: "816575916782",
    appId: "1:816575916782:web:91c5e521e573e3db8ba1ff"
  };

  // inicializar firebase
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  // botón
  document.getElementById("btn").addEventListener("click", () => {
    const numero = document.getElementById("numero").value.trim();
    const resultado = document.getElementById("resultado");

    if (!/^[0-9]{9}$/.test(numero)) {
      resultado.innerText = "Número inválido";
      return;
    }

    db.collection("numeros").doc(numero).set({
      reportado: true,
      fecha: new Date()
    })
    .then(() => {
      resultado.innerText = "Número reportado correctamente";
    })
    .catch(err => {
      resultado.innerText = "Error: " + err.message;
      console.error(err);
    });
  });
</script>

</body>
</html>
